<div class="property-list-container">
    <div class="header-section">
        <h1>Available Properties</h1>

        <!-- Filter Bar -->
        <mat-card class="filter-bar">
            <mat-form-field appearance="outline">
                <mat-label>Location</mat-label>
                <input matInput [(ngModel)]="filters.location" placeholder="e.g. Chicago"
                    (keyup.enter)="applyFilters()">
                <mat-icon matSuffix>location_on</mat-icon>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Max Rent (‚Çπ)</mat-label>
                <input matInput type="number" [(ngModel)]="filters.maxRent" placeholder="e.g. 5000"
                    (keyup.enter)="applyFilters()">
                <mat-icon matSuffix>payments</mat-icon>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Amenities</mat-label>
                <input matInput [(ngModel)]="filters.amenities" placeholder="e.g. Wi-Fi, AC"
                    (keyup.enter)="applyFilters()">
                <mat-icon matSuffix>list</mat-icon>
            </mat-form-field>

            <div class="filter-actions">
                <button mat-raised-button color="primary" (click)="applyFilters()">
                    <mat-icon>search</mat-icon> Search
                </button>
                <button mat-button (click)="clearFilters()">Clear</button>
            </div>
        </mat-card>
    </div>

    <!-- Loading Spinner -->
    <div *ngIf="loading" class="loading-container">
        <mat-spinner></mat-spinner>
    </div>

    <!-- Property Grid -->
    <div *ngIf="!loading" class="property-grid">
        <mat-card *ngFor="let property of properties" class="property-card">
            <img mat-card-image
                [src]="property.PropertyPhotos?.[0]?.photoUrl || 'https://via.placeholder.com/400x300?text=No+Image'"
                [alt]="property.title" class="property-image" />

            <mat-card-header>
                <mat-card-title>{{ property.title }}</mat-card-title>
                <mat-card-subtitle>{{ property.location }}</mat-card-subtitle>
            </mat-card-header>

            <mat-card-content>
                <p class="property-description">{{ property.description }}</p>
                <div class="property-details">
                    <span class="rent-amount">‚Çπ{{ property.rent }}/month</span>
                    <span class="property-type">{{ property.propertyType }}</span>
                </div>
                <div class="property-features">
                    <span *ngIf="property.bedrooms">üõèÔ∏è {{ property.bedrooms }} Beds</span>
                    <span *ngIf="property.bathrooms">üöø {{ property.bathrooms }} Baths</span>
                    <span *ngIf="property.area">üìê {{ property.area }} sq.ft</span>
                </div>
            </mat-card-content>

            <mat-card-actions>
                <button mat-raised-button color="primary" [routerLink]="['/tenant/property', property.id]">
                    View Details
                </button>
            </mat-card-actions>
        </mat-card>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && properties.length === 0" class="empty-state">
        <h2>No Properties Available</h2>
        <p>Check back later for new listings!</p>
    </div>
</div>