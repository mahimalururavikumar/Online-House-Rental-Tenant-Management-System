<div class="property-list-container">
    <h1>Available Properties</h1>

    <div *ngIf="loading" class="loading-container">
        <mat-spinner></mat-spinner>
    </div>

    <div *ngIf="!loading" class="property-grid">
        <mat-card *ngFor="let property of properties" class="property-card">
            <img mat-card-image
                [src]="property.PropertyPhotos?.[0]?.photoUrl || 'https://via.placeholder.com/400x300?text=No+Image'"
                [alt]="property.title" class="property-image" />

            <mat-card-header>
                <mat-card-title>{{ property.title }}</mat-card-title>
                <mat-card-subtitle>{{ property.location }}</mat-card-subtitle>
            </mat-card-header>

            <mat-card-content>
                <p class="property-description">{{ property.description }}</p>
                <div class="property-details">
                    <span class="rent-amount">â‚¹{{ property.rent }}/month</span>
                    <span class="property-type">{{ property.propertyType }}</span>
                </div>
            </mat-card-content>

            <mat-card-actions>
                <button mat-raised-button color="primary" [routerLink]="['/owner/my-properties']"
                    *ngIf="property.owner_id === authService.getUserId()">
                    Manage This Property
                </button>
                <span *ngIf="property.owner_id !== authService.getUserId()" class="info-text">Listing by
                    another owner</span>
            </mat-card-actions>
        </mat-card>
    </div>
</div>